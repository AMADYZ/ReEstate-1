<!DOCTYPE html>
<html>
  <head>
    <title>Chat</title>
    <!-- <style>
      /* #chat-messages {
        height: 200px;
        overflow-y: scroll;
        border: 1px solid #ccc;
        padding: 10px;
      } */
    </style> -->
  </head>
  <body>
    <div id="chat-container">
      <div id="chat-messages"></div>
      <input type="text" id="message-input" placeholder="Type your message" />
      <button id="send-button">Send</button>
    </div>

    <script>

      async function sendMessage(message) {
        const response = await fetch(
          "https://api.openai.com/v1/chat/completions",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${apiKey}`,
            },
            body: JSON.stringify({
              model: "gpt-3.5-turbo", // or any other model you prefer
              messages: [
                { role: "system", content: "You are" },
                { role: "user", content: message },
              ],
            }),
          }
        );

        const data = await response.json();
        return data.choices[0].message.content;
      }

      document.addEventListener("DOMContentLoaded", function () {
        const messageInput = document.getElementById("message-input");
        const sendButton = document.getElementById("send-button");
        const chatMessages = document.getElementById("chat-messages");

        sendButton.addEventListener("click", async function () {
          const message = messageInput.value;
          if (message.trim() !== "") {
            displayMessage("You", message);
            messageInput.value = "";

            // Call the sendMessage function and display the response
            const response = await sendMessage(message);
            displayMessage("ChatGPT", response);
          }
        });

        function displayMessage(sender, message) {
          const newMessage = document.createElement("div");
          newMessage.innerHTML = `<strong>${sender}:</strong> ${message}`;
          chatMessages.appendChild(newMessage);
          chatMessages.scrollTop = chatMessages.scrollHeight;
        }
      });
    </script>
 Â </body>
</html>