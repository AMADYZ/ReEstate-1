<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="" type="image/x-icon">

    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9.1.0/swiper-bundle.min.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/list.css">
    <link rel="stylesheet" href="/css/filterCSS.css">
    <link rel="stylesheet" href="https://unpkg.com/mouse-follower@1/dist/mouse-follower.min.css" />
    <script src="https://unpkg.com/mouse-follower@1/dist/mouse-follower.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
    <script src="https://unpkg.com/mouse-follower@1/dist/mouse-follower.min.js"></script>
    <script src="/Script/filter.js"></script>
    <title>List-View</title>
</head>
<body>
    <div id="menuToggle">
        <input type="checkbox">
        <span id="span1"></span>
        <span id="span2"></span>
        <span id="span3"></span>
        <nav class="nav-menu">
            <div class="nav1">
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="#">Design</a>
                <a href="contact.html">Contact</a>
                <a id="searchnav" href="#">Search</a>
                <a id="Signupnav" href="reg.html">SignUp</a>
            </div>
        </nav>
    </div>
    <div class="intro"></div>
    <div class="__title">Residences for Sale</div>
    <div class="container">
        <div class="filter-search">
            <div class="search">
                <form action="" class="search-bar">
                    <input type="text" class="input" placeholder="Search">
                    <button type="submit"><img src="/Images/loupe.png" class="search_img" alt=""></button>
                </form>
            </div>
            <form class="filter-form" action="/filter" method="get">
                <input type="hidden" name="location" value="<%=location %>">
                <div class="input-values">
                    <div>Property Type</div>
                    <input type="text" class="filter" name="property" placeholder="property type" autocomplete="off"
                        list="property-type" value="">
                    <datalist id="property-type">
                        <option>Show all</option>
                        <option> Apartment</option>
                        <option>Duplex</option>
                        <option> Studio</option>
                        <option>Town House</option>
                        <option>
                            Twin House</option>
                        <option>
                            Penthouse</option>
                        <option>
                            Villa</option>
                        <option>
                            Office</option>
                        <option>
                            Store</option>
                        <option>
                            Chalet</option>
                        <option>
                            Chalet with Garden</option>
                        <option>
                            Pharmacy</option>
                        <option>
                            Clinic</option>
                        <option>
                            Laboratory</option>
                    </datalist>
                </div>
                <div class="input-values">
                    <div>View</div>
                        <input type="text" class="filter" name="View" placeholder="View" autocomplete="off"
                            list="view-type" value="">
                        <datalist id="view-type">
                            <option>Show all</option>
                            <option>Main Street</option>
                            <option>Beachfront</option>
                            <option>Lake view</option>
                            <option>Nile view</option>
                            </select>
                        </datalist>
                    </div>
                    <div class="input-values">
                        <div>Area</div>
                        <div class="area-price">
                                <input type="text" class="filter" name="Min-Area" placeholder="Min" autocomplete="off"
                                list="min-area-type" >
                                <datalist id="min-area-type">
                                <option>Min</option>
                                <option>50</option>
                                <option>75</option>
                                <option>100</option>
                                <option>125</option>
                                <option>150</option>
                                <option>175</option>
                                <option>200</option>
                                <option>250</option>
                                <option>300</option>
                                <option>400</option>
                                <option>500</option>
                            </datalist>
                            <input type="text" class="filter" name="Max-Area" placeholder="Max" autocomplete="off"
                                list="max-area-type" >
                                <datalist id="max-area-type">
                                <option >Max</option>
                                <optio>50</option>
                                <option>75</option>
                                <option>100</option>
                                <option>125</option>
                                <option>150</option>
                                <option>175</option>
                                <option>200</option>
                                <option>250</option>
                                <option>300</option>
                                <option>400</option>
                                <option>500</option>
                            </datalist>
                        </div>
                    </div>
                    <div class="input-values">
                    <div>Price</div>
                    <div class="area-price">
                            <input type="text" class="filter" name="Min-Price" placeholder="Min" autocomplete="off"
                            list="min-price-type" >
                            <datalist id="min-price-type">
                            <option>Min</option>
                            <option>1000000</option>
                            <option>1500000</option>
                            <option>2000000</option>
                            <option>2500000</option>
                            <option>3000000</option>
                            <option>3500000</option>
                            <option>4000000</option>
                            <option>4500000</option>
                            <option>5000000</option>
                        </datalist> 
                        <input type="text" class="filter" name="Max-Price" placeholder="Max" autocomplete="off"
                         list="max-price-type">
                         <datalist id="max-price-type">
                            <option>Max</option>
                            <option>1000000</option>
                            <option>1500000</option>
                            <option>2000000</option>
                            <option>2500000</option>
                            <option>3000000</option>
                            <option>3500000</option>
                            <option>4000000</option>
                            <option>4500000</option>
                            <option>5000000</option>
                        </datalist> 
                    </div>
                </div>
                    <div class="numbers-div">
                        <div class="div-info">
                            <span>Bedrooms</span>
                        </div>
                        <div class="num-buttons">
                            <input type="hidden" id="selectedButton" name="bedroom" value="">
                            <button class="btns" type="button" onclick="setButtonValue(1)">1</button>
                            <button class="btns" type="button" onclick="setButtonValue(2)">2</button>
                            <button class="btns" type="button" onclick="setButtonValue(3)">3</button>
                            <button class="btns" type="button" onclick="setButtonValue(4)">4</button>
                            <button class="btns" type="button" onclick="setButtonValue(5)">+5</button>
                        </div>
                    </div>
                    <div class="numbers-div">
                        <div class="div-info">
                            <span>Bathrooms</span>
                        </div>
                        <div class="num-buttons">
                            <input type="hidden" id="selectedButtonB" name="bathroom" value="">
                            <button class="btns" type="button" onclick="setButtonValueB(1)">1</button>
                            <button class="btns" type="button" onclick="setButtonValueB(2)">2</button>
                            <button class="btns" type="button" onclick="setButtonValueB(3)">3</button>
                            <button class="btns" type="button" onclick="setButtonValueB(4)">4</button>
                            <button class="btns" type="button" onclick="setButtonValueB(5)">+5</button>
                        </div>
                    </div>
                    <div class="sub-button">
                        <input type="submit" value="Submit" class="sub">
                    </div>
            </form>
            </div>
       
        <div class="container2">
            <div class="list-grid">
                <%   if(data.length>0){%>
                    <% data.forEach(estate=> { %>
                    <article class="popular__card">
                    <div class="photo1">
                        <a href="/details?id=<%= estate._id %>"><img src="/img-search/popular5.jpg" class="popular__img"></a>
                        <div class="img1text">Click for information</div>
                    </div>
                    <div class="popular__data">
                        <h3 class="popular__title" style="
                        font-family: 'BW Gradual';
                        ">
                            Aliva Private Garden
                        </h3>
                        <h2 class="popular_price" style="
                        font-family: 'Degular';
                        ">
                            <bold><%=estate.price%></bold>
                        </h2>
                        <p class="popular__description">
                            <%=estate.location%>
                        </p>
                    </div>
                    <div class="line"></div>
                    <div class="inner-details">
                        <div class="bed-details"><img class="bed" src="/Images/bedrooms.png">
                            <div class="number"><%=estate.bedrooms%> Bedrooms</div>
                        </div>
                        <div class="bath-details">
                            <img class="bath" src="/Images/bathrooms.png">
                            <div class="number"><%=estate.bathrooms%> Bathrooms</div>
                        </div>
                        <div class="vl"></div>
                        <p id="meter"><%=estate.area%> m<sup>2</sup></p>
                    </div>
                    <div class="line"></div>
                    <div>
                        <h3 class="info">
                            <bold>Relator</bold>
                        </h3>
                        <div class="relator">
                            <img class="channel" src="/Images/channel-1.jpeg" alt="">
                            <div class="relator-info">
                                <p class="author">Adam perice</p>
                                <p>(555) 555-4321</p>
                            </div>
                        </div>
                    </div>
                </article>
                    <%})%>    
                <% } else { %>
                    <p>There are no Data to display...</p>
                    <% } %>
            </div>     
              </div>

          </div> 

    <footer class="footer section">
        <div class="footer__container container grid">
            <div>
                <a href="#" class="footer__logo" style="color: #fff;">
                    ReEstate <svg width="25" height="30" viewBox="0 0 31 31" fill="none"
                        xmlns="http://www.w3.org/2000/svg" style="color: #fff;">
                        <g clip-path="url(#clip0)">
                            <path
                                d="M17.6056 8.59195C19.4697 6.72793 21.2813 5.51209 21.6437 5.87442C22.01 6.24079 20.7942 8.04845 18.9261 9.91247C17.0621 11.7765 15.2504 12.9923 14.8881 12.63C14.5258 12.2677 15.7416 10.456 17.6056 8.59195Z"
                                fill="currentColor"></path>
                            <path
                                d="M14.6419 5.62436C16.5059 3.76034 18.3176 2.54449 18.68 2.91086C19.0463 3.27722 17.8305 5.08488 15.9624 6.94891C14.0984 8.81293 12.2867 10.0328 11.9244 9.66644C11.558 9.30008 12.7779 7.49241 14.6419 5.62436Z"
                                fill="currentColor"></path>
                            <path
                                d="M11.6759 2.66143C13.54 0.797407 15.3517 -0.422464 15.714 -0.0560999C16.0804 0.310264 14.8645 2.11793 12.9965 3.98195C11.1324 5.84598 9.32074 7.06585 8.95841 6.69949C8.59607 6.33312 9.81191 4.52546 11.6759 2.66143Z"
                                fill="currentColor"></path>
                            <path
                                d="M4.10305 17.4845C5.96707 19.3486 7.18694 21.1602 6.82058 21.5226C6.45422 21.8889 4.64655 20.6731 2.78253 18.8051C0.9185 16.941 -0.30137 15.1293 0.0649938 14.767C0.431357 14.4047 2.23902 15.6205 4.10305 17.4845Z"
                                fill="currentColor"></path>
                            <path
                                d="M7.06984 14.5219C8.93387 16.386 10.1537 18.1977 9.78737 18.56C9.42101 18.9264 7.61335 17.7105 5.74932 15.8425C3.8853 13.9784 2.66543 12.1667 3.03179 11.8044C3.39413 11.438 5.20582 12.6539 7.06984 14.5219Z"
                                fill="currentColor"></path>
                            <path
                                d="M10.0327 11.5548C11.8968 13.4189 13.1166 15.2306 12.7503 15.5929C12.3839 15.9593 10.5762 14.7434 8.71221 12.8754C6.84819 11.0113 5.62832 9.19965 5.99468 8.83731C6.36105 8.47498 8.16871 9.69082 10.0327 11.5548Z"
                                fill="currentColor"></path>
                            <path
                                d="M17.8361 26.717C19.7001 24.8529 21.5118 23.6371 21.8741 23.9994C22.2405 24.3658 21.0247 26.1734 19.1566 28.0375C17.2926 29.9015 15.4809 31.1173 15.1186 30.755C14.7562 30.3886 15.9721 28.581 17.8361 26.717Z"
                                fill="currentColor"></path>
                            <path
                                d="M14.8725 23.7492C16.7365 21.8852 18.5482 20.6693 18.9106 21.0316C19.2769 21.398 18.0611 23.2057 16.193 25.0697C14.329 26.9337 12.5173 28.1536 12.155 27.7872C11.7886 27.4249 13.0045 25.6172 14.8725 23.7492Z"
                                fill="currentColor"></path>
                            <path
                                d="M11.9045 20.7864C13.7685 18.9224 15.5802 17.7025 15.9425 18.0689C16.3089 18.4353 15.093 20.2429 13.225 22.107C11.3609 23.971 9.54926 25.1908 9.18692 24.8245C8.82458 24.4581 10.0404 22.6505 11.9045 20.7864Z"
                                fill="currentColor"></path>
                            <path
                                d="M22.1265 17.8195C23.9905 19.6835 25.2064 21.4952 24.844 21.8575C24.4777 22.2239 22.67 21.0081 20.806 19.14C18.9419 17.276 17.7221 15.4643 18.0884 15.102C18.4508 14.7396 20.2584 15.9555 22.1265 17.8195Z"
                                fill="currentColor"></path>
                            <path
                                d="M25.0913 14.8559C26.9553 16.7199 28.1712 18.5316 27.8089 18.894C27.4425 19.2603 25.6348 18.0445 23.7708 16.1764C21.9068 14.3124 20.6869 12.5007 21.0533 12.1384C21.4156 11.772 23.2273 12.9879 25.0913 14.8559Z"
                                fill="currentColor"></path>
                            <path
                                d="M28.0562 11.8888C29.9202 13.7529 31.1401 15.5645 30.7737 15.9269C30.4073 16.2932 28.5997 15.0774 26.7357 13.2094C24.8716 11.3453 23.6518 9.53364 24.0181 9.1713C24.3805 8.80896 26.1881 10.0248 28.0562 11.8888Z"
                                fill="currentColor"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0">
                                <rect width="31" height="31" fill="white"></rect>
                            </clipPath>
                        </defs>
                    </svg>
                </a>
                <p class="footer__description" style="color: #fff;">
                    Our vision is to make all people <br>
                    the best place to live for them.
                </p>
            </div>

            <div class="footer__content">
                <div>
                    <h3 class="footer__title" style="color: #fff;">
                        About
                    </h3>

                    <ul class="footer__links" style="color: #fff;">
                        <li>
                            <a href="#" class="footer__link">About Us</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Features</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">News & Blog</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer__title" style="color: #fff;">
                        Company
                    </h3>

                    <ul class="footer__links" style="color: #fff;">
                        <li>
                            <a href="#" class="footer__link">How We Work?</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Capital</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Security</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer__title" style="color: #fff;">
                        Support
                    </h3>

                    <ul class="footer__links" style="color: #fff;">
                        <li>
                            <a href="#" class="footer__link">FAQs</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Support center</a>
                        </li>
                        <li>
                            <a href="#" class="footer__link">Contact Us</a>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 class="footer__title" style="color: #fff;">
                        Follow us
                    </h3>

                    <ul class="footer__social">
                        <a href="https://www.facebook.com/" target="_blank" class="footer__social-link">
                            <i class='bx bxl-facebook-circle'></i>
                        </a>
                        <a href="https://www.instagram.com/" target="_blank" class="footer__social-link">
                            <i class='bx bxl-instagram-alt'></i>
                        </a>
                        <a href="https://www.pinterest.com/" target="_blank" class="footer__social-link">
                            <i class='bx bxl-pinterest'></i>
                        </a>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="assets/js/scrollreveal.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@9.1.0/swiper-bundle.min.js"></script>

    <script src="/Script/main.js"></script>

    <script src="/Script/pagination.js"></script>
    <script src="/Script/list.js"></script>
</body>

</html>

<script>

  const locationValue = '<%= location %>'; // Retrieve the location value from the EJS variable

  document.querySelector('.filter-form').addEventListener('submit', function(e) {
    e.preventDefault(); // Prevent the form from submitting immediately
    
    const filterForm = this;
    filterForm.action = '/filter?location=' + encodeURIComponent(locationValue);

    filterForm.submit();
  });

    const cursor = new MouseFollower({
        el: null,
        container: document.body,
        className: "mf-cursor",
        innerClassName: "mf-cursor-inner",
        textClassName: "mf-cursor-text",
        mediaClassName: "mf-cursor-media",
        mediaBoxClassName: "mf-cursor-media-box",
        iconSvgClassName: "mf-svgsprite",
        iconSvgNamePrefix: "-",
        iconSvgSrc: "",
        dataAttr: "cursor",
        hiddenState: "-hidden",
        textState: "-text",
        iconState: "-icon",
        activeState: "-active",
        mediaState: "-media",
        stateDetection: {
            "-pointer": "a,button",
            "-hidden": "iframe"
        },
        visible: true,
        visibleOnState: false,
        speed: 1,
        ease: "expo.out",
        overwrite: true,
        skewing: 0,
        skewingText: 0,
        skewingIcon: 2,
        skewingMedia: 2,
        skewingDelta: 0.001,
        skewingDeltaMax: 0.15,
        stickDelta: 0.15,
        showTimeout: 20,
        hideOnLeave: true,
        hideTimeout: 300,
        hideMediaTimeout: 300,
    });
</script>
